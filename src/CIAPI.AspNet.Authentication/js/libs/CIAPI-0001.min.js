var CIAPI=CIAPI||{};CIAPI.__testData=(function(){try{var c,b,d=[],i={},e,a,g=function(j){var k=Math.random()>0.5?1:-1;return j.Close+(k*j.Close*0.05)},f=function(m,k){var j={minute:1000*60,hour:1000*60*60,day:1000*60*60*24};var l=new Date(m.BarDate.getTime()-j[k]);var n=g(m);return{BarDate:l,Close:n,High:n*(Math.random()+1),Low:n*(1-Math.random()),Open:m.Close}};for(c=0;c<=100;c++){e={BarDate:new Date(),Close:1.6283,High:1.6285,Low:1.6283,Open:1.6284};a={MarketId:c,Name:"{marketName} CFD #"+(c+1),PriceHistory:{minute:[]}};for(b=0;b<=1000;b++){a.PriceHistory.minute.push(e);e=f(e,"minute")}d.push(a)}return{MarketList:d}}catch(h){console.log(h)}})();var CIAPI=CIAPI||{};CIAPI.dojo={};(function(){var f=CIAPI.dojo,c=Object.prototype.toString;f.isArray=function(d){return d&&(d instanceof Array||typeof d=="array")};f.isFunction=function(d){return c.call(d)==="[object Function]"};f._extraNames=a=a||["hasOwnProperty","valueOf","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","constructor"];var a=f._extraNames,b=a.length,e={};f.clone=function(m){if(!m||typeof m!="object"||f.isFunction(m)){return m}if(m.nodeType&&"cloneNode" in m){return m.cloneNode(true)}if(m instanceof Date){return new Date(m.getTime())}if(m instanceof RegExp){return new RegExp(m)}var k,h,d,j,g;if(f.isArray(m)){k=[];for(h=0,d=m.length;h<d;++h){if(h in m){k.push(f.clone(m[h]))}}}else{k=m.constructor?new m.constructor():{}}for(g in m){j=m[g];if(!(g in k)||(k[g]!==j&&(!(g in e)||e[g]!==j))){k[g]=f.clone(j)}}if(b){for(h=0;h<b;++h){g=a[h];j=m[g];if(!(g in k)||(k[g]!==j&&(!(g in e)||e[g]!==j))){k[g]=j}}}return k}})();var CIAPI=CIAPI||{};CIAPI.log=function(a){console.log(a)};var CIAPI=CIAPI||{};CIAPI.version="0.1";var CIAPI=CIAPI||{};CIAPI.services=(function(){return{ListCfdMarkets:function(b,e,d){if(d>1000){throw {message:"Can only return a maximum of 1000 pricebars"}}var c=CIAPI.dojo.clone(CIAPI.__testData.MarketList.slice(0,d));for(var a in c){c[a].Name=c[a].Name.replace("{marketName}",b)}return c},GetPriceBars:function(f,b,e,c){var a,d=[];if(b!=="minute"){throw {message:"Only interval of 'minute' is currently supported"}}if(c>1000){throw {message:"Can only return a maximum of 1000 pricebars"}}for(a in CIAPI.__testData.MarketList){if(CIAPI.__testData.MarketList[a].MarketId==f){d=CIAPI.__testData.MarketList[a].PriceHistory;break}}return{PartialPriceBar:CIAPI.dojo.clone(d.minute[0]),PriceBars:CIAPI.dojo.clone(d.minute.slice(1,c+1))}}}})();var CIAPI=CIAPI||{};CIAPI.streams=(function(){return{ListenToPrice:function(b,a){setInterval(function(){var c,f,e,d;for(c in CIAPI.__testData.MarketList){if(CIAPI.__testData.MarketList[c].MarketId==b){d=CIAPI.__testData.MarketList[c].PriceHistory;break}}e=Math.random()>0.5?1:-1;f=e*d.minute[0].Close*0.05;d.minute[0].Close+=f;d.minute[0].High=(d.minute[0].Close>d.minute[0].High)?d.minute[0].Close:d.minute[0].High;d.minute[0].Low=(d.minute[0].Close<d.minute[0].Low)?d.minute[0].Close:d.minute[0].Low;a({MarketId:b,bid:d.minute[0].Close,offer:d.minute[0].Close,high:d.minute[0].High,low:d.minute[0].Low,change:f})},Math.random()*5000+1000)}}})();